syntax = "proto3";

package test.nested;

option php_namespace = "Tests\\ProtoSuite\\Nested";

// Simple nested message
message Outer {
  message Inner {
    int32 value = 1;
    string label = 2;
  }

  Inner inner = 1;
  string name = 2;
}

// Multiple levels of nesting
message Level1 {
  message Level2 {
    message Level3 {
      message Level4 {
        int32 deep_value = 1;
      }
      Level4 level4 = 1;
    }
    Level3 level3 = 1;
  }
  Level2 level2 = 1;
}

// Repeated nested messages
message RepeatedNested {
  message Item {
    int32 id = 1;
    string name = 2;
  }

  repeated Item items = 1;
}

// Map with nested message values
message MapNested {
  message Value {
    int32 count = 1;
    string description = 2;
  }

  map<string, Value> entries = 1;
}

// Self-referencing message (linked list)
message Node {
  int32 value = 1;
  Node next = 2;
}

// Mutually referencing messages
message Person {
  string name = 1;
  Company employer = 2;
}

message Company {
  string name = 1;
  repeated Person employees = 2;
}

// Complex nesting with multiple field types
message ComplexNested {
  message Address {
    string street = 1;
    string city = 2;
    string country = 3;
  }

  message ContactInfo {
    string email = 1;
    string phone = 2;
    Address address = 3;
  }

  string id = 1;
  ContactInfo contact = 2;
  repeated string tags = 3;
  map<string, string> metadata = 4;
}

// Empty nested messages
message EmptyOuter {
  message EmptyInner {
  }

  EmptyInner inner = 1;
  string label = 2;
}

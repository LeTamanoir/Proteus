package gen

import (
	"strings"
)

var PHP_RESERVED_WORDS = map[string]bool{
	// from https://www.php.net/manual/en/reserved.other-reserved-words.php
	"int":      true,
	"float":    true,
	"bool":     true,
	"string":   true,
	"true":     true,
	"false":    true,
	"null":     true,
	"void":     true,
	"iterable": true,
	"object":   true,
	"mixed":    true,
	"never":    true,

	// from https://www.php.net/manual/en/reserved.classes.php
	// Predefined Classes
	"Directory":              true,
	"stdClass":               true,
	"__PHP_Incomplete_Class": true,
	"Exception":              true,
	"ErrorException":         true,
	"php_user_filter":        true,
	"Closure":                true,
	"Generator":              true,
	"ArithmeticError":        true,
	"AssertionError":         true,
	"DivisionByZeroError":    true,
	"Error":                  true,
	"Throwable":              true,
	"ParseError":             true,
	"TypeError":              true,
	"self":                   true,
	"parent":                 true,

	// from https://www.php.net/manual/en/reserved.keywords.php
	// PHP Keywords
	"__halt_compiler": true,
	"abstract":        true,
	"and":             true,
	"array":           true,
	"as":              true,
	"break":           true,
	"callable":        true,
	"case":            true,
	"catch":           true,
	"class":           true,
	"clone":           true,
	"const":           true,
	"continue":        true,
	"declare":         true,
	"default":         true,
	"die":             true,
	"do":              true,
	"echo":            true,
	"else":            true,
	"elseif":          true,
	"empty":           true,
	"enddeclare":      true,
	"endfor":          true,
	"endforeach":      true,
	"endif":           true,
	"endswitch":       true,
	"endwhile":        true,
	"eval":            true,
	"exit":            true,
	"extends":         true,
	"final":           true,
	"finally":         true,
	"fn":              true,
	"for":             true,
	"foreach":         true,
	"function":        true,
	"global":          true,
	"goto":            true,
	"if":              true,
	"implements":      true,
	"include":         true,
	"include_once":    true,
	"instanceof":      true,
	"insteadof":       true,
	"interface":       true,
	"isset":           true,
	"list":            true,
	"match":           true,
	"namespace":       true,
	"new":             true,
	"or":              true,
	"print":           true,
	"private":         true,
	"protected":       true,
	"public":          true,
	"readonly":        true,
	"require":         true,
	"require_once":    true,
	"return":          true,
	"static":          true,
	"switch":          true,
	"throw":           true,
	"trait":           true,
	"try":             true,
	"unset":           true,
	"use":             true,
	"var":             true,
	"while":           true,
	"xor":             true,
	"yield":           true,
	"yield from":      true,

	// Compile-time constants
	"__CLASS__":     true,
	"__DIR__":       true,
	"__FILE__":      true,
	"__FUNCTION__":  true,
	"__LINE__":      true,
	"__METHOD__":    true,
	"__PROPERTY__":  true,
	"__NAMESPACE__": true,
	"__TRAIT__":     true,
}

func GetPhpClassName(name string) string {
	if _, ok := PHP_RESERVED_WORDS[strings.ToLower(name)]; ok {
		return GetPhpClassName(name + "_")
	}
	return name
}
